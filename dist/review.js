!function(e){"use strict";e.clientContext={set:function(e,n){return localStorage.setItem(e,JSON.stringify(n)),n},get:function(e){return JSON.parse(localStorage.getItem(e))},remove:function(e){localStorage.removeItem(e)}}}(window.review=window.review||{}),function(e){"use strict";var n={};n.patterns={email:/^([\w\.\-]+)@([\w\-]+)((\.(\w){2,15})+)$/},n.clientContextKeys={userName:"usernameForReview",userMail:"usermailForReview",reviewSpotHintShown:"reviewSpotHintShown",reviewGeneralHintShown:"reviewGeneralHintShown"},n.css={reviewable:"reviewable",reviewSpot:"review-spot",reviewSpotWrapper:"review-spot-wrapper",reviewDialog:"review-dialog",generalReviewDialog:"general-review-dialog",elementReviewDialog:"element-review-dialog",closeDialogBtn:"close-dialog-btn",commentStatusMessage:"comment-status-message",cancelBtn:"cancel-btn",commentBtn:"comment-btn",commentsHeader:"comments-header",message:"message",identifyUserWrapper:"identify-user-wrapper",messageWrapper:"message-wrapper",errorMessage:"error-message",mailInput:"email-input",nameInput:"name-input",addCommentForm:"add-comment-form",reviewHint:"review-hint",reviewHintText:"review-hint-text",reviewHitnBtn:"review-hint-btn",spotReviewHint:"spot-review-hint",generalReviewHint:"general-review-hint",top:"top",left:"left",right:"right",bottom:"bottom",middle:"middle",expanded:"expanded",error:"error",name:"name",email:"email",empty:"empty",shown:"shown",success:"success",fail:"fail",disabled:"disabled"},n.selectors={reviewable:"."+n.css.reviewable,reviewSpot:"."+n.css.reviewSpot,reviewSpotWrapper:"."+n.css.reviewSpotWrapper,reviewDialog:"."+n.css.reviewDialog,closeDialogBtn:"."+n.css.closeDialogBtn,commentStatusMessage:"."+n.css.commentStatusMessage,cancelBtn:"."+n.css.cancelBtn,commentBtn:"."+n.css.commentBtn,commentsHeader:"."+n.css.commentsHeader,message:"."+n.css.message,identifyUserWrapper:"."+n.css.identifyUserWrapper,messageWrapper:"."+n.css.messageWrapper,errorMessage:"."+n.css.errorMessage,mailInput:"."+n.css.mailInput,nameInput:"."+n.css.nameInput,addCommentForm:"."+n.css.addCommentForm,reviewHint:"."+n.css.reviewHint,reviewHintText:"."+n.css.reviewHintText,reviewHitnBtn:"."+n.css.reviewHitnBtn,name:"."+n.css.name,email:"."+n.css.email,success:"."+n.css.success,fail:"."+n.css.fail,body:"body"},e.constants=n}(window.review=window.review||{}),function(e){"use strict";e.htmlMarkupProvider={getHtmlMarkup:function(e){var n=window.plugins.localizationService;return $.parseHTML(n.localizeHtml(e))}}}(window.review=window.review||{}),function(e){"use strict";e.ReviewPlugin=function(){function n(n,t,i){if(void 0===$)throw"Easygenerator review requires jQuery";if(!n)throw"Failed to initialize review plugin. Review api url is invalid.";if(!t)throw"Failed to initialize review plugin. Course id is invalid.";window.plugins.localizationService.init(i);var a=new e.ReviewService(n,t);o=new e.ReviewSpotsController,r=new e.ReviewHintController,s=new e.ReviewDialogController(a,r),s.showGeneralReviewDialog()}function t(){o.renderSpots(i),r.showHintsIfNeeded()}function i(e){r.isSpotReviewHintShown()?r.hideSpotReviewHint():s.showElementReviewDialog(e)}var o=null,r=null,s=null;return{init:n,render:t}}}(window.review=window.review||{}),function(e){"use strict";e.ReviewService=function(e,n){function t(t,i,o){return $.ajax({url:e+"api/comment/create",data:{courseId:n,text:t.trim(),createdByName:i.trim(),createdBy:o.trim()},type:"POST"})}return{postComment:t}}}(window.review=window.review||{}),function(e){"use strict";e.PopupPositioner=function(){function n(e,n){function t(e,n,t,r){function s(e,n,t){return e===i.top&&t>n-100?i.bottom:e===i.bottom&&n+t>o.height()?i.top:e}var a={};return a.aligment=s(e,n,r),a}function s(e,n,t,o){var r={};r.aligment="";var s=n,l=s+t,m=a();return m===i.right&&e-o+23>s?(r.aligment=i.right,r):m===i.left&&l>e+o?(r.aligment=i.left,r):l>e+o?(r.aligment=i.left,r):e-o+23>s?(r.aligment=i.right,r):(r.aligment=i.middle,r)}function a(){var n=e.offset().left;return o.width()/2-n>0?i.right:i.left}var l=n.height(),m=n.width(),c=e.offset(),u=o.offset(),d={};return d.vertical=t(r,c.top,u.top,l),d.horizontal=s(c.left,u.left,o.width(),m),n.addClass(d.vertical.aligment).addClass(d.horizontal.aligment),d}var t=e.constants,i=t.css,o=$(t.selectors.body),r=i.bottom;return{setPopupPosition:n}}}(window.review=window.review||{}),function(e){"use strict";e.ReviewDialogController=function(n,t){function i(){a.show()}function o(e){s.isShown&&s.hide(),s.show(e,r.css.elementReviewDialog)}var r=e.constants,s=new e.ElementReviewDialog(n),a=new e.GeneralReviewDialog(n,t);return{showGeneralReviewDialog:i,showElementReviewDialog:o}}}(window.review=window.review||{}),function(e){"use strict";e.ReviewHint=function(n,t){function i(e,i){l.isShown=!0,a.appendTo(e),a.addClass(t),a.find(r.selectors.reviewHintText).text(n),a.find(r.selectors.reviewHitnBtn).click(i)}function o(){l.isShown=!1,a.detach()}var r=e.constants,s=e.htmlMarkupProvider.getHtmlMarkup('<div class="review-hint"> <div class="review-hint-text-wrapper"> <div class="review-hint-text"></div> </div> <div class="review-hint-action-wrapper"> <button class="review-hint-btn btn">{{gotIt}}</button> </div> </div>'),a=$(s),l={isShown:!1,show:i,hide:o};return l}}(window.review=window.review||{}),function(e){"use strict";e.ReviewHintController=function(){function n(e){u.show(e,function(){t()})}function t(){u.hide(),m.set(l.clientContextKeys.reviewSpotHintShown,!0),a()}function i(){d.show($(l.selectors.body),function(){o()})}function o(){d.hide(),m.set(l.clientContextKeys.reviewGeneralHintShown,!0),a()}function r(){return u.isShown}function s(){return d.isShown}function a(){if(!d.isShown){u.isShown&&u.hide();var e=$(l.selectors.reviewSpotWrapper);e.length>0&&m.get(l.clientContextKeys.reviewSpotHintShown)!==!0?n(e[0]):m.get(l.clientContextKeys.reviewGeneralHintShown)!==!0&&i()}}var l=e.constants,m=e.clientContext,c=window.plugins.localizationService,u=new e.ReviewHint(c.localize("elementReviewHint"),l.css.spotReviewHint+" "+l.css.left),d=new e.ReviewHint(c.localize("generalReviewHint"),l.css.generalReviewHint+" "+l.css.bottom);return{isSpotReviewHintShown:r,isGeneralReviewHintShown:s,showSpotReviewHint:n,showGeneralReviewHint:i,hideSpotReviewHint:t,hideGeneralReviewHint:o,showHintsIfNeeded:a}}}(window.review=window.review||{}),function(e){"use strict";e.ReviewSpotsController=function(){function n(e){var n=[];return $(i.selectors.reviewable).each(function(){var i=t($(this),e);i&&n.push(i)}),n}function t(e,n){if(!(e.children().find(i.selectors.reviewSpot).length>0)){var t=$(o);if(t.appendTo(e),n){var r=t.find(i.selectors.reviewSpot);r.click(function(){n(t)})}return t}}var i=e.constants,o=e.htmlMarkupProvider.getHtmlMarkup('<div class="review-spot-wrapper"> <div class="review-spot"></div> </div>');return{renderSpots:n}}}(window.review=window.review||{}),function(e){"use strict";e.CommentForm=function(n,t){function i(){t&&t()}function o(){if(g.identifyForm.isShown){if(!m())return;w.set(d.clientContextKeys.userName,g.identifyForm.nameField.getValue().trim()),w.set(d.clientContextKeys.userMail,g.identifyForm.mailField.getValue().trim())}else if(0===g.messageForm.messageField.getValue().trim().length)return void g.messageForm.messageField.setErrorMark();var e=w.get(d.clientContextKeys.userName),t=w.get(d.clientContextKeys.userMail);if(!(e&&e.trim()&&t&&t.trim()))return void a();var i=g.messageForm.messageField.getValue().trim();g.submitBtn.disable(),n.postComment(i,e,t).done(function(e){l(),g.submitBtn.enable(),e&&(e.success?(r(),g.commentStatusMessage.success.fadeIn()):g.commentStatusMessage.fail.fadeIn())}).fail(function(){g.submitBtn.enable(),l(),g.commentStatusMessage.fail.fadeIn()})}function r(){g.commentStatusMessage.hide(),l(),g.messageForm.messageField.clear(),g.messageForm.messageField.focus()}function s(){g.cancelBtn.click(i),g.submitBtn.click(o),g.messageForm.messageField.onfocus(function(){g.commentStatusMessage.fadeOut()})}function a(){g.identifyForm.nameField.clear(),g.identifyForm.mailField.clear(),g.messageForm.hide(),g.identifyForm.fadeIn()}function l(){g.identifyForm.hide(),g.messageForm.fadeIn()}function m(){var e=!0;return c()||(g.identifyForm.nameField.setErrorMark(),e=!1),u()||(g.identifyForm.mailField.setErrorMark(),e=!1),e}function c(){var e=g.identifyForm.nameField.getValue();return e&&e.trim()&&e.trim().length<=254}function u(){var e=g.identifyForm.mailField.getValue();return e&&e.trim()&&e.trim().length<=254&&d.patterns.email.test(e.trim())}var d=e.constants,w=e.clientContext,v=$(e.htmlMarkupProvider.getHtmlMarkup('<form class="add-comment-form"> <div class="message-wrapper"> <div class="add-comment-form-title">{{leaveYourComment}}</div> <textarea class="comment-text-block message" placeholder="{{typeYourCommentHere}}"></textarea> </div> <div class="identify-user-wrapper"> <div class="identify-user-title">{{identifyMessage}}</div> <div class="identify-user-row"> <input class="name-input" type="text" /> <label>{{name}}</label> <span class="error-message name">{{enterYourNameError}}</span> </div> <div class="identify-user-row"> <input class="email-input" type="email" /> <label>{{email}}</label> <span class="error-message email">{{enterValidEmailError}}</span> </div> </div> <div class="comment-action-wrapper"> <div class="comment-status-message success" title="{{commentWasSent}}">{{commentWasSent}}</div> <div class="comment-status-message fail" title="{{commentWasNotSent}}">{{commentWasNotSent}}<br />{{tryAgain}}</div> <div class="comment-actions"> <button title="{{cancel}}" class="cancel-btn"> <span class="btn-title">{{cancel}}</span> </button> <button title="{{postComment}}" class="comment-btn"> <span class="btn-title">{{postComment}}</span> </button> </div> </div> </form>')),g=new e.CommentFormControls(v);return s(),{$element:v,init:r}}}(window.review=window.review||{}),function(e){"use strict";e.CommentFormControls=function(n){function t(){var e=l.call(this,m.selectors.commentStatusMessage);return e.success=new r(m.selectors.commentStatusMessage+m.selectors.success),e.fail=new r(m.selectors.commentStatusMessage+m.selectors.fail),e}function i(){var e=l.call(this,m.selectors.messageWrapper);return e.messageField=new a(m.selectors.message),e}function o(){var e=l.call(this,m.selectors.identifyUserWrapper);return e.nameField=new a(m.selectors.nameInput),e.mailField=new a(m.selectors.mailInput),e.nameErrorMessage=new r(m.selectors.errorMessage+m.selectors.name),e.mailErrorMassage=new r(m.selectors.errorMessage+m.selectors.email),e}function r(t){return new e.controls.Message(n,t)}function s(t){return new e.controls.Button(n,t)}function a(t){return new e.controls.TextField(n,t)}function l(t){return new e.controls.Control(n,t)}var m=e.constants,c={cancelBtn:new s(m.selectors.cancelBtn),submitBtn:new s(m.selectors.commentBtn),commentStatusMessage:new t,messageForm:new i,identifyForm:new o};return c}}(window.review=window.review||{}),function(e){"use strict";function n(n,t){return e.controls.Control.call(this,n,t)}function t(n,t){var i=e.controls.Control.call(this,n,t),o=i.$control;return i.click=function(e){o.click(function(n){n.preventDefault(),e()})},i}function i(n,t){function i(){o.removeErrorMark(),0===o.getValue().length?o.addClass(e.constants.css.empty):o.removeClass(e.constants.css.empty)}var o=e.controls.Control.call(this,n,t),r=o.$control,s=r.nextAll(e.constants.selectors.errorMessage),a=null;return r.change(i),r.focus(function(){o.removeErrorMark(),a&&a()}),o.onfocus=function(e){a=e},o.getValue=function(){return r.val()},o.setValue=function(e){r.val(e),i()},o.clear=function(){o.setValue(""),o.removeErrorMark()},o.setErrorMark=function(){o.addClass(e.constants.css.error),s.addClass(e.constants.css.shown)},o.removeErrorMark=function(){o.removeClass(e.constants.css.error),s.removeClass(e.constants.css.shown)},o}function o(e,n){function t(e){u.addClass(e)}function i(e){u.removeClass(e)}function o(){u.show(),d.isShown=!0}function r(){u.hide(),d.isShown=!1}function s(){u.fadeOut("fast"),d.isShown=!1}function a(){u.fadeIn("fast"),d.isShown=!0}function l(){u.focus()}function m(){u.prop("disabled",!0),t("disabled")}function c(){u.prop("disabled",!1),i("disabled")}var u=e.find(n),d={isShown:!0,show:o,hide:r,focus:l,addClass:t,removeClass:i,fadeIn:a,fadeOut:s,disable:m,enable:c,$control:u};return d}e.controls={Message:n,Button:t,TextField:i,Control:o}}(window.review=window.review||{}),function(e){"use strict";e.ElementReviewDialog=function(n){function t(e){m.isShown||(a.appendTo(e),a.hide(),s.setPopupPosition(e,a),a.fadeIn(.1).addClass(o.css.shown),r.init(),m.isShown=!0)}function i(){m.isShown&&(a.fadeOut(.1,function(){a.removeClass(o.css.shown),a.detach()}),m.isShown=!1)}var o=e.constants,r=new e.CommentForm(n,i),s=new e.PopupPositioner,a=$(e.htmlMarkupProvider.getHtmlMarkup('<div class="review-dialog element-review-dialog"> <button class="close-dialog-btn"></button> <form class="add-comment-form"> </form> </div>')),l=new e.controls.Button(a,o.selectors.closeDialogBtn),m={isShown:!1,show:t,hide:i};return l.click(i),a.find(o.selectors.addCommentForm).replaceWith(r.$element),m}}(window.review=window.review||{}),function(e){"use strict";e.GeneralReviewDialog=function(n,t){function i(){a.appendTo(r.selectors.body),s.init()}function o(){var e=a.hasClass(r.css.expanded);a.toggleClass(r.css.expanded),e||(s.init(),t.isGeneralReviewHintShown()&&t.hideGeneralReviewHint())}var r=e.constants,s=new e.CommentForm(n),a=$(e.htmlMarkupProvider.getHtmlMarkup('<div class="review-dialog general-review-dialog"> <div class="comments-header"> <div class="comment-header-text">{{leaveGeneralComment}}</div> <div class="comments-expander"></div> </div> <form class="add-comment-form"> </form> </div>')),l=new e.controls.Button(a,r.selectors.commentsHeader),m={show:i};return a.find(r.selectors.addCommentForm).replaceWith(s.$element),l.click(o),m}}(window.review=window.review||{}),function(e){e.lang={cn:{commentWasNotSent:"评论没有发送",commentWasSent:"评论已发送",leaveYourComment:"发表评论",send:"发布评论",tryAgain:"重试",yourMessage:"输入您的消息...",identifyMessage:"请填写您自己的相关信息",name:"姓名",email:"电子邮件",enterValidEmailError:"输入有效电子邮件",enterYourNameError:"输入您的姓名",gotIt:"Got it",elementReviewHint:"Click on icon near elements to leave the comment.",generalReviewHint:"Click on the panel here to leave the general comment.",leaveGeneralComment:"Leave general comment",typeYourCommentHere:"Type your comment here...",cancel:"Cancel",postComment:"Post comment"},de:{commentWasNotSent:"Der Kommentar wurde nicht gesendet.",commentWasSent:"Der Kommentar wurde gesendet.",leaveYourComment:"Kommentieren Sie diesen Beitrag",send:"Kommentar posten",tryAgain:"Versuchen Sie es erneut.",yourMessage:"Ihre Nachricht tippen ...",identifyMessage:"Bitte identifizieren Sie sich",name:"Name",email:"E-Mail",enterValidEmailError:"Geben Sie eine gültige E-Mail ein",enterYourNameError:"Geben Sie Ihren Namen ein",gotIt:"Got it",elementReviewHint:"Click on icon near elements to leave the comment.",generalReviewHint:"Click on the panel here to leave the general comment.",leaveGeneralComment:"Leave general comment",typeYourCommentHere:"Type your comment here...",cancel:"Cancel",postComment:"Post comment"},en:{commentWasNotSent:"Comment was not sent.",commentWasSent:"Comment was sent",leaveYourComment:"Leave your comment",send:"Post comment",tryAgain:"Try again",yourMessage:"Type your message...",identifyMessage:"Please identify yourself",name:"Name",email:"E-mail",enterValidEmailError:"Enter a valid e-mail",enterYourNameError:"Enter a valid name",gotIt:"Got it",elementReviewHint:"Click on icon near elements to leave the comment.",generalReviewHint:"Click on the panel here to leave the general comment.",leaveGeneralComment:"Leave general comment",typeYourCommentHere:"Type your comment here...",cancel:"Cancel",postComment:"Post comment"},es:{commentWasNotSent:"El comentario no fue enviado.",commentWasSent:"El comentario fue enviado",leaveYourComment:"Deje su comentario",send:"Publicar comentario",tryAgain:"Intentar de nuevo",yourMessage:"Escriba el mensaje...",identifyMessage:"Identifíquese",name:"Nombre",email:"Dirección de correo electrónico",enterValidEmailError:"Introduzca una dirección de correo electrónico válida",enterYourNameError:"Introduzca un nombre válido",gotIt:"Got it",elementReviewHint:"Click on icon near elements to leave the comment.",generalReviewHint:"Click on the panel here to leave the general comment.",leaveGeneralComment:"Leave general comment",typeYourCommentHere:"Type your comment here...",cancel:"Cancel",postComment:"Post comment"},fr:{commentWasNotSent:"Le commentaire n'a pas été envoyé.",commentWasSent:"Le commentaire a été envoyé",leaveYourComment:"Laissez votre commentaire",send:"Publiez le commentaire",tryAgain:"Réessayer",yourMessage:"Saisissez votre message...",identifyMessage:"Veuillez vous identifier",name:"Nom",email:"Adresse email",enterValidEmailError:"Veuillez saisir une adresse email valide",enterYourNameError:"Veuillez saisir votre nom",gotIt:"Got it",elementReviewHint:"Click on icon near elements to leave the comment.",generalReviewHint:"Click on the panel here to leave the general comment.",leaveGeneralComment:"Leave general comment",typeYourCommentHere:"Type your comment here...",cancel:"Cancel",postComment:"Post comment"},nl:{commentWasNotSent:"Opmerking niet verzonden",commentWasSent:"Opmerking verzonden",leaveYourComment:"Geef uw mening",send:"Plaats opmerking",tryAgain:"Probeer opnieuw",yourMessage:"Typ uw bericht",identifyMessage:"Vul uw gegevens in",name:"Naam",email:"Email",enterValidEmailError:"Vul een correct emailadres in",enterYourNameError:"Vul een geldige naam in",gotIt:"Got it",elementReviewHint:"Click on icon near elements to leave the comment.",generalReviewHint:"Click on the panel here to leave the general comment.",leaveGeneralComment:"Leave general comment",typeYourCommentHere:"Type your comment here...",cancel:"Cancel",postComment:"Post comment"},pt_br:{commentWasNotSent:"Comentário não foi enviado.",commentWasSent:"Comentário foi enviado",leaveYourComment:"Deixe seu comentário",send:"Postar comentário",tryAgain:"Tente novamente",yourMessage:"Digite sua mensagem...",identifyMessage:"Identifique-se",name:"Nome",email:"Email",enterValidEmailError:"Insira um email válido",enterYourNameError:"Insira seu nome",gotIt:"Got it",elementReviewHint:"Click on icon near elements to leave the comment.",generalReviewHint:"Click on the panel here to leave the general comment.",leaveGeneralComment:"Leave general comment",typeYourCommentHere:"Type your comment here...",cancel:"Cancel",postComment:"Post comment"},ua:{commentWasNotSent:"Коментар не був відправлений.",commentWasSent:"Відправлено",leaveYourComment:"Залиште свій коментар",send:"Відправити коментар",tryAgain:"Спробувати знову",yourMessage:"Напишіть Ваше повідомлення...",identifyMessage:"Будь-ласка, ідентифікуйте себе",name:"Ім'я",email:"E-mail",enterValidEmailError:"Введіть валідний e-mail",enterYourNameError:"Введіть своє ім'я",gotIt:"Зрозуміло",elementReviewHint:"Натисніть на іконку щоб залишити коментар",generalReviewHint:"Натисніть на панель щоб залишити загальний коментар",leaveGeneralComment:"Залиште загальний коментар",typeYourCommentHere:"Ваш коментар...",cancel:"Відміна",postComment:"Відіслати коментар"}}}(window.plugins=window.plugins||{}),function(e){"use strict";var n=function(){function n(n){if(!e.lang)throw"Plugins lang is not initialized";o.locale=n}function t(n){var t=e.lang[o.locale];return t||(t=e.lang[o.defaultLocale]),t[n]}function i(e){for(var n=/\{\{(.*?)\}\}/gi,i="",o=e;null!==(i=n.exec(o));){var r=i[0],s=i[1];o=o.replace(r,t(s))}return o}var o={defaultLocale:"en",locale:"en"};return{init:n,localize:t,localizeHtml:i}};e.localizationService=new n}(window.plugins=window.plugins||{});